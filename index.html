<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CareerPath AI - Your Career Guidance Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #3498db 0%, #2c3e50 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .chat-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            height: 90vh;
            display: flex;
            flex-direction: column;
        }
        
        .chat-header {
            background: #3498db;
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }
        
        .chat-header h1 {
            font-size: 24px;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .chat-header p {
            opacity: 0.9;
            font-size: 14px;
        }
        
        .career-icon {
            font-size: 28px;
        }
        
        .disclaimer {
            background: #e8f4fc;
            color: #2c3e50;
            padding: 10px 15px;
            font-size: 12px;
            text-align: center;
            border-bottom: 1px solid #b8daff;
        }
        
        #chat-box {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #f8f9fa;
        }
        
        .message {
            margin: 15px 0;
            padding: 12px 16px;
            border-radius: 18px;
            max-width: 80%;
            word-wrap: break-word;
            animation: fadeIn 0.3s ease-in;
            line-height: 1.4;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .user {
            background: #2980b9;
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 5px;
        }
        
        .bot {
            background: #e8f4fc;
            color: #2c3e50;
            margin-right: auto;
            border-bottom-left-radius: 5px;
            border-left: 3px solid #3498db;
        }
        
        .typing {
            background: #e8f4fc;
            color: #718096;
            font-style: italic;
            margin-right: auto;
            border-bottom-left-radius: 5px;
        }
        
        .input-container {
            display: flex;
            padding: 20px;
            background: white;
            border-top: 1px solid #e2e8f0;
            gap: 10px;
        }
        
        #user-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 25px;
            outline: none;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        #user-input:focus {
            border-color: #3498db;
        }
        
        #send-btn {
            padding: 12px 24px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        #send-btn:hover {
            background: #2980b9;
        }
        
        #send-btn:disabled {
            background: #a0aec0;
            cursor: not-allowed;
        }
        
        .error {
            background: #fed7d7;
            color: #c53030;
            border: 1px solid #feb2b2;
        }
        
        .career-suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }
        
        .career-chip {
            background: #e8f4fc;
            color: #2c3e50;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .career-chip:hover {
            background: #3498db;
            color: white;
        }
        
        /* Career response styling */
        .step-container {
            margin: 15px 0;
        }
        
        .step-title {
            font-weight: bold;
            color: #3498db;
            margin-bottom: 8px;
            font-size: 16px;
        }
        
        .step-content {
            margin-left: 10px;
        }
        
        .step-list {
            margin: 8px 0;
            padding-left: 20px;
        }
        
        .step-list li {
            margin-bottom: 5px;
        }
        
        .important-note {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 4px;
        }
        
        .follow-up-question {
            margin-top: 15px;
            font-weight: bold;
            color: #3498db;
        }
        
        /* Career path visualization */
        .career-path {
            background: #f8f9fa;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .career-path-title {
            font-weight: bold;
            color: #3498db;
            margin-bottom: 10px;
        }
        
        .path-step {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .path-step-number {
            background: #3498db;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-size: 12px;
        }
        
        /* Skills section */
        .skills-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 10px 0;
        }
        
        .skill-tag {
            background: #e8f4fc;
            color: #2c3e50;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 12px;
        }
        
        /* Scrollbar styling */
        #chat-box::-webkit-scrollbar {
            width: 6px;
        }
        
        #chat-box::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        #chat-box::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }
        
        #chat-box::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
        
        .career-icon {
            display: inline-block;
            margin-right: 5px;
        }
        
        @media (max-width: 600px) {
            .chat-container {
                height: 95vh;
            }
            
            .message {
                max-width: 90%;
            }
            
            .career-suggestions {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <h1><span class="career-icon">ðŸ’¼</span> CareerPath AI</h1>
            <p>Your Career Guidance Assistant - Helping you find your ideal career path</p>
        </div>
        
        <div class="disclaimer">
            <strong>Important:</strong> This is an AI assistant for career guidance purposes only. 
            It is not a substitute for professional career counseling. Always consult with career advisors for important decisions.
        </div>
        
        <div id="chat-box">
            <div class="message bot">
                <span class="career-icon">ðŸ‘‹</span> Hello! I'm CareerPath AI, your virtual career guidance assistant. 
                I'm here to help you explore career options, identify your strengths, and plan your professional development.
                <br><br>
                <strong>How can I assist with your career journey today?</strong>
                <div class="career-suggestions">
                    <div class="career-chip" data-career="career change">Career Change</div>
                    <div class="career-chip" data-career="skills assessment">Skills Assessment</div>
                    <div class="career-chip" data-career="job search">Job Search</div>
                    <div class="career-chip" data-career="education path">Education Path</div>
                </div>
            </div>
        </div>
        
        <div class="input-container">
            <input type="text" id="user-input" placeholder="Tell me about your career interests, skills, or goals..." autocomplete="off">
            <button id="send-btn"><span>Send</span> ðŸš€</button>
        </div>
    </div>

    <script>
        const chatBox = document.getElementById("chat-box");
        const userInput = document.getElementById("user-input");
        const sendBtn = document.getElementById("send-btn");

        // ðŸ”‘ Your Gemini API Key
        const API_KEY = "AIzaSyAfzj195tQUOMcjf2OOyfrVPrYbqKSVwUA";
        
        // Try different model endpoints in order of preference
        const API_ENDPOINTS = [
            'gemini-2.5-flash'
        ];

        // Career context prompt with step-by-step formatting instructions
        const CAREER_PROMPT = `You are CareerPath AI, a professional and encouraging career guidance assistant. Follow these guidelines strictly:

1. ONLY answer career, education, and professional development-related questions
2. If asked about non-career topics, politely respond: "I'm specialized in career guidance and can only answer career-related questions. Is there a career concern I can help with?"
3. Provide practical, evidence-based career advice
4. Always include a disclaimer that you're an AI and not a substitute for professional career counseling
5. Structure your responses in CLEAR, NUMBERED STEPS with proper formatting
6. Use HTML-like tags for structure but render them as plain text:
   - Use **Step 1: Title** for each step
   - Use bullet points with * for lists
   - Use **Important Note:** for important considerations
   - Use **Follow-up Question:** at the end
7. Be encouraging and supportive in your tone
8. Suggest consulting with career advisors for important decisions
9. Keep responses clear and concise but thorough enough to be helpful
10. End most responses with a relevant follow-up question to continue the conversation
11. When discussing career paths, include:
    - Required skills and qualifications
    - Potential career progression
    - Industry outlook and salary expectations
    - Recommended resources or next steps

Current user question: `;

        function appendMessage(text, sender) {
            const msg = document.createElement("div");
            msg.classList.add("message", sender);
            
            if (sender === "bot") {
                // Format the bot's response with proper styling
                msg.innerHTML = formatCareerResponse(text);
            } else {
                msg.textContent = text;
            }
            
            chatBox.appendChild(msg);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function formatCareerResponse(text) {
            // Convert the AI's response to properly formatted HTML
            let formattedText = text;
            
            // Format step titles
            formattedText = formattedText.replace(/\*\*Step (\d+): (.*?)\*\*/g, '<div class="step-title">Step $1: $2</div>');
            
            // Format lists
            formattedText = formattedText.replace(/\* (.*?)(?=\n|$)/g, '<li>$1</li>');
            formattedText = formattedText.replace(/(<li>.*<\/li>)/s, '<ul class="step-list">$1</ul>');
            
            // Format important notes
            formattedText = formattedText.replace(/\*\*Important Note:\*\* (.*?)(?=\n\n|\n\*\*|$)/s, '<div class="important-note"><strong>Important Note:</strong> $1</div>');
            
            // Format follow-up questions
            formattedText = formattedText.replace(/\*\*Follow-up Question:\*\* (.*?)(?=\n\n|$)/s, '<div class="follow-up-question">Follow-up Question: $1</div>');
            
            // Format career paths
            formattedText = formattedText.replace(/\*\*Career Path:\*\* (.*?)(?=\n\n|\n\*\*|$)/s, '<div class="career-path"><div class="career-path-title">Career Path: $1</div>');
            
            return formattedText;
        }

        function showTypingIndicator() {
            const typing = document.createElement("div");
            typing.classList.add("message", "typing");
            typing.textContent = "CareerPath AI is thinking...";
            typing.id = "typing-indicator";
            chatBox.appendChild(typing);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function hideTypingIndicator() {
            const typing = document.getElementById("typing-indicator");
            if (typing) {
                typing.remove();
            }
        }

        async function tryApiCall(message, model) {
            const API_URL = `https://generativelanguage.googleapis.com/v1/models/${model}:generateContent?key=${API_KEY}`;
            try {
                const response = await fetch(API_URL, {
                    method: "POST",
                    headers: { 
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{ text: CAREER_PROMPT + message }]
                        }],
                        generationConfig: {
                            temperature: 0.7,
                            topK: 40,
                            topP: 0.95,
                            maxOutputTokens: 1024,
                        }
                    })
                });
                if (response.ok) {
                    const data = await response.json();
                    return data.candidates?.[0]?.content?.parts?.[0]?.text || "I'm here to help with your career questions. Could you please tell me more about your interests, skills, or career goals?";
                } else {
                    const errorData = await response.json();
                    console.error(`API Error for ${model}:`, errorData);
                    return null;
                }
            } catch (error) {
                console.error(`Network error for ${model}:`, error);
                return null;
            }
        }

        async function getBotResponse(userMessage) {
            showTypingIndicator();
            sendBtn.disabled = true;

            let botReply = "I'm currently experiencing technical difficulties. Please try again in a moment or consult a career advisor for immediate guidance.";
            let success = false;

            // Try each API endpoint until one works
            for (const model of API_ENDPOINTS) {
                const result = await tryApiCall(userMessage, model);
                if (result) {
                    botReply = result;
                    success = true;
                    console.log(`Success with model: ${model}`);
                    break;
                }
            }

            hideTypingIndicator();
            appendMessage(botReply, "bot");
            sendBtn.disabled = false;

            if (!success) {
                appendMessage("ðŸ’¡ <strong>Technical Note:</strong> Please ensure your API key is valid and you have access to Gemini API models. For immediate career guidance, please contact a career advisor.", "bot");
            }
        }

        function handleSendMessage() {
            const message = userInput.value.trim();
            if (message) {
                appendMessage(message, "user");
                userInput.value = "";
                getBotResponse(message);
            }
        }

        // Event Listeners
        sendBtn.addEventListener("click", handleSendMessage);

        userInput.addEventListener("keypress", (e) => {
            if (e.key === "Enter") {
                handleSendMessage();
            }
        });

        // Focus on input when page loads
        userInput.focus();

        // Career suggestion chips
        document.querySelectorAll('.career-chip').forEach(chip => {
            chip.addEventListener('click', () => {
                userInput.value = `I need help with ${chip.getAttribute('data-career')}. `;
                userInput.focus();
            });
        });

        // Auto-resize input
        userInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';
        });
    </script>
</body>
</html>